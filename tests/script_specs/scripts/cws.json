{
  "smoke": [
    {
      "name": "ls",
      "args": ["ls"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)\\bdocker\\b.*\\brun\\b.*--rm.*-v\\n/var/run/docker.sock:/var/run/docker.sock.*-e\\nGH_TOKEN.*-e\\nGITHUB_TOKEN.*graysurf/codex-workspace-launcher:latest.*\\bls\\b"
      }
    },
    {
      "name": "create",
      "args": ["create", "octo/demo"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)\\bdocker\\b.*\\brun\\b.*--rm.*-v\\n/var/run/docker.sock:/var/run/docker.sock.*-e\\nGH_TOKEN.*-e\\nGITHUB_TOKEN.*graysurf/codex-workspace-launcher:latest.*\\bcreate\\b.*octo/demo"
      }
    },
    {
      "name": "exec",
      "args": ["exec", "ws-smoke", "ls"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)\\bdocker\\b.*\\brun\\b.*--rm.*-v\\n/var/run/docker.sock:/var/run/docker.sock.*-e\\nGH_TOKEN.*-e\\nGITHUB_TOKEN.*graysurf/codex-workspace-launcher:latest.*\\bexec\\b.*\\bws-smoke\\b.*\\bls\\b"
      }
    },
    {
      "name": "rm",
      "args": ["rm", "ws-smoke", "--yes"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)\\bdocker\\b.*\\brun\\b.*--rm.*-v\\n/var/run/docker.sock:/var/run/docker.sock.*-e\\nGH_TOKEN.*-e\\nGITHUB_TOKEN.*graysurf/codex-workspace-launcher:latest.*\\brm\\b.*\\bws-smoke\\b.*--yes"
      }
    },
    {
      "name": "reset",
      "args": ["reset", "repo", "ws-smoke"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)\\bdocker\\b.*\\brun\\b.*--rm.*-v\\n/var/run/docker.sock:/var/run/docker.sock.*-e\\nGH_TOKEN.*-e\\nGITHUB_TOKEN.*graysurf/codex-workspace-launcher:latest.*\\breset\\b.*\\brepo\\b.*\\bws-smoke\\b"
      }
    },
    {
      "name": "tunnel",
      "args": ["tunnel", "ws-smoke", "--detach"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)\\bdocker\\b.*\\brun\\b.*--rm.*-v\\n/var/run/docker.sock:/var/run/docker.sock.*-e\\nGH_TOKEN.*-e\\nGITHUB_TOKEN.*graysurf/codex-workspace-launcher:latest.*\\btunnel\\b.*\\bws-smoke\\b.*--detach"
      }
    },
    {
      "name": "auth-gpg",
      "args": ["auth", "gpg", "--key", "DEADBEEF", "ws-smoke"],
      "timeout_sec": 10,
      "expect": {
        "exit_codes": [0],
        "stdout_regex": "(?s)\\bdocker\\b.*\\brun\\b.*--rm.*-v\\n/var/run/docker.sock:/var/run/docker.sock.*-e\\nGH_TOKEN.*-e\\nGITHUB_TOKEN.*-e\\nCODEX_WORKSPACE_GPG_KEY.*graysurf/codex-workspace-launcher:latest.*\\bauth\\b.*\\bgpg\\b.*--key.*DEADBEEF.*\\bws-smoke\\b"
      }
    }
  ]
}
